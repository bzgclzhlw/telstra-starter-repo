{
    "sourceFile": "src/main/java/au/com/telstra/simcardactivator/controller/ActivationController.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1771062876670,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1771062876670,
            "name": "Commit-0",
            "content": "package au.com.telstra.simcardactivator.controller;\r\n\r\nimport au.com.telstra.simcardactivator.dto.ActivationRequest;\r\nimport au.com.telstra.simcardactivator.dto.ActuatorResponse;\r\nimport au.com.telstra.simcardactivator.service.ActuatorClient;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@RestController\r\npublic class ActivationController {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(ActivationController.class);\r\n    private final ActuatorClient actuatorClient;\r\n\r\n    public ActivationController(ActuatorClient actuatorClient) {\r\n        this.actuatorClient = actuatorClient;\r\n    }\r\n\r\n    @PostMapping(\"/activate\")\r\n    public ActuatorResponse activate(@RequestBody ActivationRequest request) {\r\n        ActuatorResponse res = actuatorClient.actuate(request.getIccid());\r\n\r\n        boolean ok = (res != null && res.isSuccess());\r\n        log.info(\"Activation {} for iccid={}, customerEmail={}\",\r\n                ok ? \"SUCCESS\" : \"FAILED\",\r\n                request.getIccid(),\r\n                request.getCustomerEmail());\r\n\r\n        // 直接把 actuator 的结果返回，方便你测试\r\n        return res == null ? failure() : res;\r\n    }\r\n\r\n    private ActuatorResponse failure() {\r\n        ActuatorResponse r = new ActuatorResponse();\r\n        r.setSuccess(false);\r\n        return r;\r\n    }\r\n}\r\n"
        }
    ]
}